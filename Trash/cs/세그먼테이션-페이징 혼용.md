# 0804  세그먼테이션-페이징 혼용 기법

**페이징** - 메모리 관리 ↔ 테이블의 크기 큼

**세그먼테이션** - 테이블의 크기 작음 ↔ 외부 단편화로 인한 추가적인 관리 불가피

1. 메모리 접근 권한
    
    ⭐ 특정 주소에 저장된 데이터를 사용할 수 있는 권한(읽기, 쓰기, 실행, 추가)
    
    일반적인 데이터 (읽기 쓰기), 상수나 읽기 전용 파일(읽기)
    
    **읽기 전용 파일** → OS 판단 하의 중요한 파일, 바이러스 의심 파일
    
    추가 권한 ⇒ 파일의 마지막에 데이터를 추가하는 것 = 쓰기 권한
    
    | 구분 | 읽기 | 쓰기 | 실행 | 비고 |
    | --- | --- | --- | --- | --- |
    | 모드 0 | X | X | X | 접근 불가 |
    | 모드 1 | X | X | O |  |
    | 모드 2 | X | O | X | 실제 사용 X |
    | 모드 3 | X | O | O | 실제 사용 X |
    | 모드 4 | O | X | X |  |
    | 모드 5 | O | X | O |  |
    | 모드 6 | O | O | X |  |
    | 모드 7 | O | O | O |  |
    
    2진법의 형태
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b5639f32-4993-460e-a8c9-a07d18798432/Untitled.png)
    
    코드 영역 ← 자기 자신을 수정하는 프로그램은 없기에 읽기, 실행 권한
    
    데이터 영역 ← 데이터는 읽고 쓰는 데이터, 읽기만 가능한 데이터
    
    스택 영역 ← 프로세스에서 사용하는 스택이 위치하는 메모리 : 읽기 쓰기 권한
    
2. 세그먼테이션-페이징 혼용 기법
    
    페이징 기법 + 메모리 접근 권한 비트 추가
    
    **문제점** 페이지 테이블의 크기가 커지고 페이지마다 권한비트로 인한 메모리 낭비
    
    ⭐권한 비트를 세그먼테이션 테이블을 이용하여 해결
    
    관련 있는 영역을 세그먼트로 묶어서 세그먼테이션 테이블로 관리하고 각각의 세그먼트를 해당 페이지 테이블로 관리하는 방식
    
    → 각 세그먼테이션 테이블은 연결된 페이지의 주소를 가르킴
    
    → 대부분의 운영체제에서 사용한다
    
3. 주소 변환
    
    세그먼테이션 - 페이징 혼용 기법에서는 가상 주소를 VA=<S,P,D>
    
    S - 세그먼트 번호, P - 나눗셈의 몫, D - 나머지
    
    1. 어떤 주소의 데이터를 요청하면 해당 주소를 가상주소로 계산
    2. S부터 검사. 자신의 영역을 벗어나는 불법 접근인가, 권한이 있는 페이지에 접근하는 가 → 세그먼테이션 오류를 발생, 강제종료
    3. 어느 프레임에 저장되었는지 찾음. 물리메모리라면 바로접근, 없다면 스왑영역에 가서 해당 페이지를 물리 메모리로 가져옴
    4. 처음위치에서 D마나큼 떨어진 곳에 접근하여 데이터를 읽거나 씀
    
    1번은 위치를 계산
    
    2번은 세그먼트 번호 = S
    
    3번은 페이지 테이블의 페이지 계산 = P
    
    4번은 떨어진 위치 = D