# 0405 인터럽트

인터럽트의 개념

1. 순차적 프로그래밍 → 한줄씩 차례로 실행 ⇒ 지금 파이썬에서 하는 프로그래밍과 같음
    
    → 특정 문제를 해결하는데 취약한 단점이 있음
    
    ### 크롬 닫기 문제
    
    ![Untitled](interrupt/Untitled.png)
    
    크롬의 우측 상단에 보면 탭이동 버튼 ∨
    
    최소화 버튼 ㅡ
    
    창모드 버튼
    
    종료 버튼 X
    
    순차적 프로그래밍에서는 주기적으로 이 버튼들의 상태를 체크해야하는 비효율적인 방식
    
    오늘날의 프로그래밍에서는 주기적으로 확인하는 대신 버튼이 눌리면 프로세스에 알려주는 이벤트 드리븐(event driven)방식을 사용
    
    운영체제에서의 입출력 처리도 유사함
    
    과거에는 **순차적 프로그래밍**처럼 입출력장치를 **직접 확인**해서 처리 = 폴링 방식
    
    점차 입출력장치가 다양해짐에 따라 폴링 방식이 어려워졌고 이벤트 드리븐 방식과 유사한 방식을 사용하기 시작함 = 인터럽트
    
    파이썬 코드에서
    
    ```python
    while True:
    	print('hello, world!')
    ```
    
    를 실행시 무한정 반복되만 Ctrl + C누르면 멈춘다 → 이것도 인터럽트
    
    즉, 인터럽트는 CPU에서 입출력관리자와 하는 상호작용, 입출력처리 외에도 종류가 다양하고 광범위하게 쓰임
    
2. 동기적 인터럽트(=사용자 인터럽트)
    1. 프로그램상의 문제로 발생하는 인터럽트(다른 사용자의 메모리 침범, 오버플로, 언더플로)
        
        오버플로 = 컴퓨터의 정수 연산의 계산 결과가 허용 범위를 초과할 때 발생하는 오류
        
        언더플로 = 음수로 표현 가능한 범위를 초과하면 나옴
        
    2. 작업자가 의도적으로 프로세스 중단을 위해 발생시킨 인터럽트 (ctrl + c)
    3. 입출력장치 같은 주변장치 조작에 의한 인터럽트
    4. 산술 연산 중 발생하는 인터럽트 (0으로 나누기)
3.  비동기적 인터럽트
    
    하드웨어적인 오류로 발생하는 인터럽트
    
    1. 키보드 인터럽트 → 키보드 누르는 순간순간이 인터럽트임
    2. 마우스 인터럽트 → 이하동문
4. 인터럽트 처리 과정
    
    인터럽트 종류에 따라 번호(IRQ)가 저장되어있음
    
    IRQ에 따라 어떻게 처리할지 이미 정해져 있음
    
    - 인터럽트 벡터
    
    인터럽트 핸들러 : 인터럽트 벡터에 연결된 인터럽트를 처리하는 함수
    
5. 인터럽트와 이중 모드
    
    커널 모드와 사용자 모드
    
    사용자 모드에서 입출력, 프로세스 생성과 같은 커널영역의 기능을 사용하려면 시스템 호출을 이용하여 커널 프로세스에 작업을 요청 → 사용자 프로세스는 대기상태로 전환
    
    이중모드는 사용자 프로세스가 시스템 자원에 직접 접근하면 생길 문제를 막기 위해 시스템 호출을 통해서 자원을 접근하게 하는 것
    
    → 사용자 프로세스가 커널 모드에서 실행되지 못하게 하는 것
    
    → 챕터 1에서 OS의 역할 중 자원보호
    
    시스템 호출을 편하고 쉽게 이용하기 위해 API를 제공
    
    **MFC(Microsoft Foundation Class Library)**
    
    마이크로 소프트에서 만든 Window API를 C++로 둘러싼 Library
    
    사용자 프로세스가 커널 모드로 진입하는 경우는 두 가지
    
    1. 시스템 호출 사용 → 자발적
    2. 인터럽트를 발생 → 비자발적