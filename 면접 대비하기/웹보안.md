# CSRF

1. CSRF란?

CSRF를 해석하면 사이트 간 요청 위조입니다.

유저의 A 웹 사이트에 대한 인증 정보를 도용해서, 해당 정보를 사용하여 B 웹 사이트에서 A 웹 사이트의 기능을 사용할 수 있게 하는 것입니다.

csrf 공격을 할 수 있는 조건은 2가지입니다. 공격자가 만든 피싱사이트나 피싱메일에 접속해야하고, 동시에 특정 웹 사이트에 로그인된 상태여야합니다.

이를 웹 개발자의 입장에서 예방하려면, csrf 토큰, samesite 쿠키 속성을 사용하거나 referrer 검증을 사용하는 방법이 있습니다.

2. CSRF의 예방 방법

CSRF 토큰을 사용해서 인증 정보가 필요한 요청에 대해서, 서버측에서 만든 고유한 CSRF 토큰을 포함시키고 검증하는 방법이 있습니다.

SameSite 쿠키 속성이나 HTTP 헤더의 referrer 헤더를 확인해서 다른 사이트에서 요청을 막을 수 있습니다.

3. CSRF 토큰에 대해 설명해주세요.

서버 측에서 CSRF 토큰을 생성해서 메모리에 저장하고, 클라이언트에 보냅니다. 클라이언트는 이를 가지고 있다가, 중요한 요청을 보낼 때 csrf 토큰을 같이 보내서, 둘이 일치하는지를 확인하는 방법입니다.

4. SameSite 쿠키 속성이나 referrer 헤더 설정을 통한 csrf 공격 방어에 대한 설명

이를 설정한 같은 웹 사이트에서만 쿠키를 보내도록 제한하는 것입니다. 이를 통해서 다른 사이트에서 우리의 웹 사이트의 쿠키를 탈취하여 요청을 보내는 것을 예방할 수 있습니다.

# XSS

크로스 사이트 스크립팅 공격은, 웹 페이지에서 스크립트 언어를 통해 유저의 브라우저에서 실행되게 하는 것을 말합니다. 서버에 저장되어 실행되는 stored xss와 url에 스크립트를 넣어 바로 실행되는 reflected xss공격으로 나뉩니다.

1. stored xss

사용자의 입력이 서버에 저장되어, 다른 사용자가 이를 조회할 때 발생하는 것입니다. 게시물이나 댓글에 악의적인 스크립트를 저장하고 다른 유저가 이를 조회할 때 스크립트가 실행되도록 하여 쿠키나 스토리지를 확인하는 것입니다.

2. reflected xss

url에 스크립트를 넣어서 이것이 실행되도록 유도하는 것입니다. url을 짧게 변경해주는 기능을 사용하거나, 아니면 메일 등을 사용해서 url을 통해 접속하도록 유도하는 것입니다.

3. dom xss

웹의 확장 프로그램 등에 의해 클라리언트의 dom을 조작하여 공격을 하는 것입니다. DOM 요소나 이벤트 핸들러를 이용합니다.
